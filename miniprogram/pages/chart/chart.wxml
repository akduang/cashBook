<view class="chart_header">
  <picker bindchange="amtTypeChange" value="{{index}}" range="{{amtTypeArr}}">
    <view class="amttype_picker">
      {{amtTypeArr[amtType]}}
    </view>
  </picker>
  <view class="date_range_wrapper">
    <text class="{{dateType==1?'active':''}}" catchtap="setDateType" data-type="1">月</text>
    <text class="{{dateType==2?'active':''}}" catchtap="setDateType" data-type="2">年</text>
  </view>
</view>
<view class="padding_180"></view>
<!-- 账单列表 -->
<view class="book_list_wrapper clearfix">
  <text class="book_list_title">{{amtType==0?'支出':'收入'}}排行榜</text>
  <view class="book_list_item" wx:for="{{chartList}}" wx:for-index="idx" wx:key="{{idx}}">
    <view class="book_list_img_wrapper"></view>
    <view class="book_list_item_info">
      <view class="book_list_item_top">
        <text class="book_list_item_name">{{item._id.bookTypeName}} {{formatData.getPercent(item.count,chartListCount)}}%</text>
        <text class="book_list_item_amt">{{item.count}}</text>
      </view>
      <view class="book_list_progress" style="width:{{formatData.getPercent(item.count,chartListCount)}}%;"></view>
    </view>
  </view>
</view>


<import src="/components/footer.wxml"/>
<template is="footer" data="{{footerIndex}}"></template>

<wxs module="formatData">
  var getPercent = function(data,total){
    var percent = data / total;
    percent = percent.toFixed(2);
    return percent*100;
  }
  module.exports = {
    getPercent:getPercent
  }
</wxs>